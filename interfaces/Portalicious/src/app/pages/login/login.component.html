<div class="flex min-h-screen flex-col">
  <p-toolbar>
    <ng-template pTemplate="start">
      <app-logo />
    </ng-template>
  </p-toolbar>
  <div class="flex-1 md:flex">
    <div
      class="flex w-full shrink-0 flex-col gap-6 bg-white px-4 py-8 md:w-1/3"
    >
      <form
        [formGroup]="loginForm"
        (ngSubmit)="onLogin()"
        class="grow"
      >
        <h1 i18n>Log in</h1>

        <p
          i18n
          class="my-6"
        >
          Use your work email to log in.
        </p>

        <div class="flex flex-col gap-2">
          <!-- eslint-disable @angular-eslint/template/no-autofocus -->
          <label>
            <ng-container i18n>E-mail</ng-container>
            <input
              pInputText
              id="email"
              type="email"
              formControlName="email"
              placeholder="example: yourname@example.org"
              i18n-placeholder
              autocomplete="email username"
              pAutoFocus
              autofocus
              class="mt-2 block w-full"
            />
          </label>
          <app-form-error
            [visible]="loginFormSubmitted() && loginForm.controls.email.invalid"
            error="Enter a valid email address"
            i18n-error
          />
          <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
          <label>
            <ng-container i18n>Password</ng-container>
            <p-password
              formControlName="password"
              [toggleMask]="true"
              [feedback]="false"
              autocomplete="current-password"
              styleClass="w-full [&_input]:w-full mt-2"
            />
          </label>
          <app-form-error
            [visible]="
              loginFormSubmitted() && loginForm.controls.password.invalid
            "
            error="Enter your password"
            i18n-error
          />
          <p-button
            label="Log in"
            i18n-label
            type="submit"
            [loading]="loginMutation.isPending()"
            rounded
            class="mt-8"
          />
          <app-form-error
            [visible]="loginMutation.isError()"
            [error]="loginMutation.failureReason()?.message"
          />
          <p i18n>
            Forgot your password?
            <a
              href="mailto:support@510.global?subject=Request Password reset for 121 Platform"
              target="_blank"
            >
              Request a password reset</a
            >
          </p>
          <p i18n>
            Read our
            <a
              href="https://manual.121.global/privacy-policy/"
              target="_blank"
              title="Opens in a new window"
              i18n-title
              >Privacy Policy
              <i
                class="pi pi-external-link ml-1 text-xs"
                aria-hidden="true"
              ></i
            ></a>
          </p>
        </div>
      </form>
      <div class="mb-4">
        <app-language-switcher />
      </div>
    </div>
    <div class="relative md:grow">
      <img
        ngSrc="assets/login.jpeg"
        fill
        priority
        alt=""
        aria-hidden="true"
        role="presentation"
        class="hidden object-cover md:block"
      />
      <div
        class="rounded-lg bg-grey-100 p-[16px] md:absolute md:bottom-0 md:left-0 md:right-0 md:m-4"
      >
        <app-cookie-banner />
      </div>
    </div>
  </div>
</div>
