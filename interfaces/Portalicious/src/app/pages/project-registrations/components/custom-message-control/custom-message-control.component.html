<div class="space-y-2">
  <p i18n>
    Custom messages are <b>not automatically translated</b> to the
    registration's preferred language.
  </p>

  <p>
    <strong i18n> Message: </strong>
    <app-info-tooltip
      message="Note that if you go over 160 characters the Person affected may receive the message as multiple texts, if they have a feature-(non-smart-)phone."
      i18n-message
    />
  </p>

  <p>
    <ng-container i18n>Use &commat; to add personalized fields. </ng-container>
    <a
      href="https://manual.121.global/"
      target="_blank"
      title="Opens in a new window"
      i18n-title="@@generic-opens-in-new-window"
    >
      <ng-container i18n>Learn more</ng-container>
      <span
        class="p-button-icon p-button-icon-right pi pi-external-link ml-2 text-sm"
      ></span>
    </a>
  </p>

  <div>
    <textarea
      rows="5"
      pInputTextarea
      [(ngModel)]="customMessageInternalModel"
      [disabled]="customMessageDisabled()"
      [mentionConfig]="mentionConfig()"
      autocomplete="off"
      class="w-full"
      [ngClass]="{
        'ng-invalid ng-dirty': !!error(),
      }"
    ></textarea>

    <p class="w-full text-end txt-body-s">
      @if (customMessageInternalModel().length > 20) {
        {{ customMessageInternalModel().length }}
      } @else {
        (>20)
      }
      <ng-container i18n> characters.</ng-container>
    </p>
    <app-form-error [error]="error()" />
  </div>

  <p i18n>
    *Please make sure registration data is available for all used personalized
    fields.
  </p>
</div>
