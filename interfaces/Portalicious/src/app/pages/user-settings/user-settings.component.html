<app-page-layout>
  <div class="flex flex-1">
    <div
      class="flex w-full shrink-0 flex-col gap-6 bg-white px-[16px] py-8 md:w-1/3"
    >
      <form
        [formGroup]="changePasswordForm"
        (ngSubmit)="onChangePassword()"
      >
        <div class="flex flex-col gap-2">
          <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
          <label>
            <ng-container i18n>Current Password</ng-container>
            <p-password
              formControlName="currentPassword"
              [toggleMask]="true"
              [feedback]="false"
              autocomplete="current-password"
              styleClass="w-full [&_input]:w-full mt-2"
            <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
            <label>
              <ng-container i18n>Current Password</ng-container>
              <p-password
                formControlName="currentPassword"
                [toggleMask]="true"
                [feedback]="false"
                autocomplete="current-password"
                styleClass="w-full [&_input]:w-full mt-2"
              />
            </label>
            @if (changePasswordForm.controls.currentPassword.errors) {
              @for (
                error of getErrors(
                  changePasswordForm.controls.currentPassword.errors
                );
                track error
              ) {
                <app-form-error
                  [visible]="true"
                  [error]="error"
                  i18n-error
                />
              }
            }
            <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
            <label>
              <ng-container i18n>New Password</ng-container>
              <p-password
                formControlName="newPassword"
                [toggleMask]="true"
                [feedback]="false"
                autocomplete="new-password"
                styleClass="w-full [&_input]:w-full mt-2"
              />
            </label>
            @if (changePasswordForm.controls.newPassword.errors) {
              @for (
                error of getErrors(
                  changePasswordForm.controls.newPassword.errors
                );
                track error
              ) {
                <app-form-error
                  [visible]="true"
                  [error]="error"
                  i18n-error
                />
              }
            }
            <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
            <label>
              <ng-container i18n>Confirm Password</ng-container>
              <p-password
                formControlName="confirmPassword"
                [toggleMask]="true"
                [feedback]="false"
                styleClass="w-full [&_input]:w-full mt-2"
              />
            </label>
            @if (changePasswordForm.controls.confirmPassword.errors) {
              @for (
                error of getErrors(
                  changePasswordForm.controls.confirmPassword.errors
                );
                track error
              ) {
                <app-form-error
                  [visible]="true"
                  [error]="error"
                  i18n-error
                />
              }
            }
            />
          </label>
          <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
          <label>
            <ng-container i18n>New Password</ng-container>
            <p-password
              formControlName="newPassword"
              [toggleMask]="true"
              [feedback]="false"
              autocomplete="current-password"
              styleClass="w-full [&_input]:w-full mt-2"
            />
          </label>
          <!-- eslint-disable-next-line @angular-eslint/template/label-has-associated-control -->
          <label>
            <ng-container i18n>Confirm Password</ng-container>
            <p-password
              formControlName="confirmPassword"
              [toggleMask]="true"
              [feedback]="false"
              autocomplete="current-password"
              styleClass="w-full [&_input]:w-full mt-2"
            />
          </label>
          <p-button
            label="Change password"
            i18n-label
            type="submit"
            rounded
            class="mt-8"
          />
        </div>
      </form>
    </div>
  </div>
</app-page-layout>
